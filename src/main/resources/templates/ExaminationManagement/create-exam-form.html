<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Create Exam Form'">Create Exam Form</title>
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">-->
</head>
<body>

<!-- Replace the content section -->
<div th:replace="layout/base.html">
    <div th:fragment="content">
        <h1 class="page-title">Create Exam Form</h1>
        <form th:action="@{/admin/exam/add}" th:object="${examForm}" method="post">

            <!-- Exam Form Name -->
            <div class="mb-3">
                <label for="examFormName" class="form-label">Exam Form Name</label>
                <input type="text" class="form-control" id="examFormName" th:field="*{examFormName}" required>
            </div>

            <!-- Form Type -->
            <div class="mb-3">
                <label for="formType" class="form-label">Form Type</label>
                <select class="form-control" id="formType" th:field="*{formType}" required>
                    <option value="">--Select Form Type--</option>
                    <option th:each="type : ${T(com.codershubham.cms.cms.model.ExaminationManagementModules.ExamFormModel.FormType).values()}"
                            th:value="${type}" th:text="${type}">
                    </option>
                </select>
            </div>

            <!-- Select Department -->
            <div class="mb-3">
                <label for="department">Select Department</label>
                <select class="form-control" id="department" th:field="*{department}" required>
                    <option value="">--Select Department--</option>
                    <th:block th:each="department : ${departments}">
                        <option th:value="${department.id}" th:text="${department.name}"></option>
                    </th:block>
                </select>
            </div>

            <!-- Select Course -->
            <div class="mb-3">
                <label for="course">Select Course</label>
                <select class="form-control" id="course" th:field="*{course}" required>
                    <option value="">--Select Course--</option>
                </select>
            </div>

            <!-- Select Semester -->
            <div class="mb-3">
                <label for="semester">Select Semester</label>
                <select class="form-control" id="semester" th:field="*{semester}" required>
                    <option value="">--Select Semester--</option>
                </select>
            </div>

            <!-- Year -->
            <div class="mb-3">
                <label for="year" class="form-label">Year</label>
                <input type="text" class="form-control" id="year" th:field="*{year}" required>
            </div>

            <!-- Start Date -->
            <div class="mb-3">
                <label for="startDate" class="form-label">Start Date</label>
                <input type="date" class="form-control" id="startDate" th:field="*{startDate}" required>
            </div>

            <!-- End Date -->
            <div class="mb-3">
                <label for="endDate" class="form-label">End Date</label>
                <input type="date" class="form-control" id="endDate" th:field="*{endDate}" required>
            </div>

            <!-- End Date with Late Fee -->
            <div class="mb-3">
                <label for="endDateWithLateFee" class="form-label">End Date with Late Fee</label>
                <input type="date" class="form-control" id="endDateWithLateFee" th:field="*{endDateWithLateFee}"
                       required>
            </div>

            <!-- End Date with Super Late Fee -->
            <div class="mb-3">
                <label for="endDateWithSuperLateFee" class="form-label">End Date with Super Late Fee</label>
                <input type="date" class="form-control" id="endDateWithSuperLateFee"
                       th:field="*{endDateWithSuperLateFee}" required>
            </div>

            <button type="submit" class="btn btn-primary">Create Exam Form</button>
        </form>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        // Load courses based on selected department
        $('#department').change(function () {
            var departmentId = $(this).val();
            console.log(departmentId)
            if (departmentId) {
                $.get("/admin/students/courses/" + departmentId, function (courses) {
                    $('#course').empty().append('<option value="">--Select Course--</option>');
                    $.each(courses, function (index, course) {
                        $('#course').append('<option value="' + course.courseID + '">' + course.courseName + '</option>');
                    });
                });
            }
        });

        // Load semesters based on selected course
        $('#course').change(function () {
            var courseId = $(this).val();
            if (courseId) {
                $.get("/admin/students/semesters/" + courseId, function (semesters) {
                    $('#semester').empty().append('<option value="">--Select Semester--</option>');
                    $.each(semesters, function (index, semester) {
                        $('#semester').append('<option value="' + semester.id + '">' + semester.name + " - " + semester.academicYear + '</option>');
                    });
                });
            }
        });
    });
</script>
</body>
</html>
