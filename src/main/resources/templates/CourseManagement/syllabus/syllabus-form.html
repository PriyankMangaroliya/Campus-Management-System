<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title th:text="'Custom Page Title'">Custom Page Title</title>-->
<!--    <title th:text="${syllabus.syllabusid} ? 'Edit Syllabus' : 'Add Syllabus'"></title>-->
<!--    <script>-->
<!--        function addTopicField(value = '') {-->
<!--            var container = document.getElementById("topicsContainer");-->
<!--            var div = document.createElement("div");-->
<!--            div.style.marginBottom = "5px";-->

<!--            var input = document.createElement("input");-->
<!--            input.type = "text";-->
<!--            input.name = "topics";-->
<!--            input.value = value;-->
<!--            input.required = true;-->

<!--            var removeButton = document.createElement("button");-->
<!--            removeButton.type = "button";-->
<!--            removeButton.innerText = "Remove";-->
<!--            removeButton.onclick = function () {-->
<!--                container.removeChild(div);-->
<!--            };-->

<!--            div.appendChild(input);-->
<!--            div.appendChild(removeButton);-->
<!--            container.appendChild(div);-->
<!--        }-->

<!--        function loadExistingTopics() {-->
<!--            var topics = document.getElementsByName("topics");-->
<!--            if (topics.length === 0) {-->
<!--                addTopicField(); // Ensure at least one topic field is present-->
<!--            }-->
<!--        }-->

<!--        window.onload = loadExistingTopics;-->
<!--    </script>-->
<!--</head>-->
<!--<body>-->

<!--&lt;!&ndash; Replace the content section &ndash;&gt;-->
<!--<div th:replace="layout/base.html">-->
<!--    <div th:fragment="content">-->

<!--        <h2 th:text="${syllabus.syllabusid} ? 'Edit Syllabus' : 'Add Syllabus'"></h2>-->

<!--        <form th:action="${userRole == 'FACULTY' ? '/faculty/syllabus/add' : '/admin/syllabus/add'}" th:object="${syllabus}" method="post">-->
<!--            <input type="hidden" th:field="*{syllabusid}"/>-->
<!--            <input type="hidden" th:field="*{subject.subjectid}"/>-->

<!--            <label>Unit No:</label>-->
<!--            <input type="number" th:field="*{unitNo}" required/><br>-->

<!--            <label>Unit Name:</label>-->
<!--            <input type="text" th:field="*{unitName}" required/><br>-->

<!--            <label>Topics:</label>-->
<!--            <div id="topicsContainer">-->
<!--                <th:block th:each="topic : *{topics}">-->
<!--                    <script th:inline="javascript">-->
<!--                        /*<![CDATA[*/-->
<!--                        addTopicField([[${topic}]]);-->
<!--                        /*]]>*/-->
<!--                    </script>-->
<!--                </th:block>-->
<!--            </div>-->
<!--            <button type="button" onclick="addTopicField()">Add Topic</button>-->
<!--            <br>-->

<!--            <label>Resources:</label>-->
<!--            <input type="text" th:field="*{resources}"/><br>-->

<!--            <button type="submit">Save</button>-->
<!--        </form>-->

<!--    </div>-->
<!--</div>-->

<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${syllabus.syllabusid} ? 'Edit Syllabus' : 'Add Syllabus'"></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script>
        function addTopicField(value = '') {
            var container = document.getElementById("topicsContainer");
            var div = document.createElement("div");
            div.className = "input-group mb-2";

            var input = document.createElement("input");
            input.type = "text";
            input.name = "topics";
            input.value = value;
            input.required = true;
            input.className = "form-control";

            var removeButton = document.createElement("button");
            removeButton.type = "button";
            removeButton.innerText = "Remove";
            removeButton.className = "btn btn-danger";
            removeButton.onclick = function () {
                container.removeChild(div);
            };

            var btnDiv = document.createElement("div");
            btnDiv.className = "input-group-append";
            btnDiv.appendChild(removeButton);

            div.appendChild(input);
            div.appendChild(btnDiv);
            container.appendChild(div);
        }

        function loadExistingTopics() {
            var topics = document.getElementsByName("topics");
            if (topics.length === 0) {
                addTopicField();
            }
        }

        window.onload = loadExistingTopics;
    </script>
</head>
<body>

<div th:replace="layout/base.html">
    <div th:fragment="content" class="container mt-4">

        <div class="card shadow">
            <div class="card-header">
                <h2 class="mb-0" th:text="${syllabus.syllabusid} ? 'Edit Syllabus' : 'Add Syllabus'"></h2>
            </div>
            <div class="card-body">
                <form th:action="${userRole == 'FACULTY' ? '/faculty/syllabus/add' : '/admin/syllabus/add'}"
                      th:object="${syllabus}" method="post">
                    <input type="hidden" th:field="*{syllabusid}"/>
                    <input type="hidden" th:field="*{subject.subjectid}"/>

                    <div class="mb-3">
                        <label class="form-label">Unit No:</label>
                        <input type="number" th:field="*{unitNo}" class="form-control" required/>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Unit Name:</label>
                        <input type="text" th:field="*{unitName}" class="form-control" required/>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Topics:</label>
                        <div id="topicsContainer"></div>
                        <button type="button" class="btn btn-primary mt-2" onclick="addTopicField()">Add Topic</button>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Resources:</label>
                        <input type="text" th:field="*{resources}" class="form-control"/>
                    </div>

                    <button type="submit" class="btn btn-success">Save</button>
                </form>
            </div>
        </div>

    </div>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    var topics = /*[[${syllabus.topics}]]*/ [];
    topics.forEach(topic => addTopicField(topic));
    /*]]>*/
</script>

</body>
</html>
