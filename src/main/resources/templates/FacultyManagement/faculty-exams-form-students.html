<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Faculty Exam Forms</title>-->
<!--    &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">-->
<!--</head>-->
<!--<body>-->
<!--<div class="container mt-4">-->
<!--    <h2 class="mb-4">Exam Forms Assigned to Faculty</h2>-->

<!--    <table class="table table-bordered">-->
<!--        <thead class="table-dark">-->
<!--        <tr>-->
<!--            <th>ID</th>-->
<!--            <th>Student</th>-->
<!--            <th>Fee Amount</th>-->
<!--            <th>Status</th>-->
<!--            <th>Actions</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="exam : ${exams}">-->
<!--            <td th:text="${exam.id}"></td>-->
<!--            <td th:text="${exam.student.firstName}"></td>-->
<!--            <td th:text="${exam.feeAmount}"></td>-->
<!--            <td th:text="${exam.status}"></td>-->
<!--            <td>-->
<!--                <form th:if="${exam.status != T(com.codershubham.cms.cms.model.ExaminationManagementModules.ExamFormStatus).FACULTY_APPROVED}"-->
<!--                      th:action="@{/faculty/exams/{facultyId}/approve/{examFormId}(facultyId=${facultyId}, examFormId=${exam.id})}"-->
<!--                      method="post"-->
<!--                      class="d-inline">-->
<!--                    <button type="submit" name="approve" value="true" class="btn btn-success btn-sm">Approve</button>-->
<!--                    <button type="submit" name="approve" value="false" class="btn btn-danger btn-sm">Reject</button>-->
<!--                </form>-->

<!--                <button class="btn btn-primary btn-sm" onclick="loadSubjects(this)" th:data-exam-id="${exam.id}"-->
<!--                        data-bs-toggle="modal" data-bs-target="#subjectsModal">-->
<!--                    View Subjects-->
<!--                </button>-->
<!--            </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->
<!--</div>-->

<!--&lt;!&ndash; Bootstrap Modal for Subjects &ndash;&gt;-->
<!--<div class="modal fade" id="subjectsModal" tabindex="-1" aria-labelledby="subjectsModalLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title" id="subjectsModalLabel">Subjects for Exam Form</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                <ul id="subjectList" class="list-group"></ul>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Bootstrap JS and jQuery &ndash;&gt;-->
<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>-->

<!--<script>-->
<!--    function loadSubjects(button) {-->
<!--        let examId = button.getAttribute("data-exam-id");-->
<!--        console.log(examId);-->
<!--        let subjectList = document.getElementById("subjectList");-->
<!--        subjectList.innerHTML = "<li class='list-group-item'>Loading...</li>";-->

<!--        fetch(`/faculty/exams/subjects/${examId}`)-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--                subjectList.innerHTML = "";-->
<!--                if (data.length === 0) {-->
<!--                    subjectList.innerHTML = "<li class='list-group-item text-danger'>No subjects found</li>";-->
<!--                } else {-->
<!--                    data.forEach(subject => {-->
<!--                        let li = document.createElement("li");-->
<!--                        li.className = "list-group-item";-->
<!--                        li.textContent = subject.subjectCode + " " + subject.subjectName + " " + subject.credits;-->
<!--                        subjectList.appendChild(li);-->
<!--                    });-->
<!--                }-->
<!--            })-->
<!--            .catch(error => {-->
<!--                subjectList.innerHTML = "<li class='list-group-item text-danger'>Error loading subjects</li>";-->
<!--                console.error("Error fetching subjects:", error);-->
<!--            });-->
<!--    }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Faculty Exam Forms'">Faculty Exam Forms</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>

<!-- Replace the content section -->
<div th:replace="layout/base.html">
    <div th:fragment="content">
        <div class="container mt-4">
            <h2 class="mb-4">Exam Forms Assigned to Faculty</h2>

            <table class="table table-bordered">
                <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Student</th>
                    <th>Fee Amount</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="exam : ${exams}">
                    <td th:text="${exam.id}"></td>
                    <td th:text="${exam.student.firstName}"></td>
                    <td th:text="${exam.feeAmount}"></td>
                    <td th:text="${exam.status}"></td>
                    <td>
                        <form th:if="${exam.status != T(com.codershubham.cms.cms.model.ExaminationManagementModules.ExamFormStatus).FACULTY_APPROVED}"
                              th:action="@{/faculty/exams/{facultyId}/approve/{examFormId}(facultyId=${facultyId}, examFormId=${exam.id})}"
                              method="post"
                              class="d-inline">
                            <button type="submit" name="approve" value="true" class="btn btn-success btn-sm">Approve</button>
                            <button type="submit" name="approve" value="false" class="btn btn-danger btn-sm">Reject</button>
                        </form>

                        <button class="btn btn-primary btn-sm" onclick="loadSubjects(this)" th:data-exam-id="${exam.id}"
                                data-bs-toggle="modal" data-bs-target="#subjectsModal">
                            View Subjects
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Bootstrap Modal for Subjects -->
        <div class="modal fade" id="subjectsModal" tabindex="-1" aria-labelledby="subjectsModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="subjectsModalLabel">Subjects for Exam Form</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <ul id="subjectList" class="list-group"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap JS and jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            function loadSubjects(button) {
                let examId = button.getAttribute("data-exam-id");
                console.log(examId);
                let subjectList = document.getElementById("subjectList");
                subjectList.innerHTML = "<li class='list-group-item'>Loading...</li>";

                fetch(`/faculty/exams/subjects/${examId}`)
                    .then(response => response.json())
                    .then(data => {
                        subjectList.innerHTML = "";
                        if (data.length === 0) {
                            subjectList.innerHTML = "<li class='list-group-item text-danger'>No subjects found</li>";
                        } else {
                            data.forEach(subject => {
                                let li = document.createElement("li");
                                li.className = "list-group-item";
                                li.textContent = subject.subjectCode + " " + subject.subjectName + " " + subject.credits;
                                subjectList.appendChild(li);
                            });
                        }
                    })
                    .catch(error => {
                        subjectList.innerHTML = "<li class='list-group-item text-danger'>Error loading subjects</li>";
                        console.error("Error fetching subjects:", error);
                    });
            }
        </script>

    </div>
</div>

</body>
</html>
